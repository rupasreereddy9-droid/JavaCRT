package Day5crt;

class Family implements Runnable {

    String resource1 = "TV";
    String resource2 = "PlayStation";

    public void run() {
        String name = Thread.currentThread().getName();

        if (name.equals("CR")) {
            crAcquiredResource();
        } else {
            mokshaAcquiredResource();
        }
    }

    void crAcquiredResource() {
        synchronized (resource2) {
            try {
                System.out.println("CR acquired PlayStation");
                Thread.sleep(2000);

                synchronized (resource1) {
                    System.out.println("CR acquired TV");
                }

            } catch (Exception e) {
                System.out.println("CR failed");
            }
        }
    }

    void mokshaAcquiredResource() {
        synchronized (resource1) {
            try {
                System.out.println("Moksha acquired TV");
                Thread.sleep(2000);

                synchronized (resource2) {
                    System.out.println("Moksha acquired PlayStation");
                }

            } catch (Exception e) {
                System.out.println("Moksha failed");
            }
        }
    }
}

public class ExampleForDeadlock {
    public static void main(String[] args) {

        Family f = new Family();

        Thread t1 = new Thread(f);
        Thread t2 = new Thread(f);

        t1.setName("CR");
        t2.setName("Moksha");

        t1.start();
        t2.start();
    }
}
